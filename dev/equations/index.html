<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Implemented equations · JuMagDocs.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>JuMagDocs.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">JuMag.jl</a></li><li><a class="toctext" href="../tutorial/">Tutorial</a></li><li class="current"><a class="toctext" href>Implemented equations</a><ul class="internal"><li><a class="toctext" href="#Energies-and-effective-field-1">Energies and effective field</a></li></ul></li><li><a class="toctext" href="../notes/">Notes</a></li><li><a class="toctext" href="../functions/">Function reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Implemented equations</a></li></ul><a class="edit-page" href="https://github.com/ww1g11/JuMagDocs.jl/blob/master/docs/src/equations.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Implemented equations</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Implemented-equations-1" href="#Implemented-equations-1">Implemented equations</a></h1><h2><a class="nav-anchor" id="Energies-and-effective-field-1" href="#Energies-and-effective-field-1">Energies and effective field</a></h2><div>\[\vec{H}_{eff}=\vec{H}_\mathrm{ex}+\vec{H}_\mathrm{zeeman}+\vec{H}_{\mathrm{anis}}+\vec{H}_{\mathrm{demag}}+\vec{H}_{\mathrm{dmi}}\]</div><h4><a class="nav-anchor" id="Exchange-energy-1" href="#Exchange-energy-1">Exchange energy</a></h4><div>\[  E_\mathrm{ex} = \int_{V} A (\nabla \vec{m})^2 \mathrm{d}V
  ```
  The exchange energy is a sum of exchange interactions from 6 nearest neighbor cells:\]</div><p>math \vec{H}<em>{i, e x}=\frac{A}{\mu</em>{0}} \sum<em>{&lt;i, j&gt;} \vec{m}</em>{j}</p><pre><code class="language-none">#### Zeeman energy
  ```math
  E_\mathrm{ex} = \int_{V} \vec{H} \cdot \vec{m} \mathrm{d}V
  ```
  Applied zeeman field:</code></pre><p>math \vec{H}<em>\mathrm{i,zeeman}=\vec{H}</em>\mathrm{ext}</p><pre><code class="language-none">#### Anisotropy
</code></pre><p>math E<em>\mathrm{anis} = -\int</em>{V} K_{u} (\vec{m} \cdot \hat{u})^2 \, dV</p><pre><code class="language-none">Set the angles between the anistropy axis and x,y,z coordinates as α,β,γ respectively, the anistropy field can be written as :</code></pre><p>math \vec{H}<em>\mathrm{i,anis}=\frac{2 \mathcal{K}</em>{u}}{\mu<em>{s}}\left({m</em>{x}  \cos^{2}\alpha \cdot\vec{i}} +{m<em>{y}  \cos^{2}\beta \cdot \vec{j}}+ m</em>{z} \cos^{2}\gamma \cdot \vec{k} \right)</p><pre><code class="language-none">#### Bulk DMI energy

  ```math
  E_{\mathrm{dmi}} = \int_V D \vec{m} \cdot (\nabla \times \vec{m}) \, \mathrm{d}V
  ```


#### Demagnetization</code></pre><p>math \mathscr{E}<em>{\text { demag }}=-\frac{1}{2} \overrightarrow{\mathbf{M}} \cdot \overrightarrow{\mathbf{B}}</em>{\text { demag }}</p><pre><code class="language-none">The demagnetization is from dipolar interactions between spins, the field is as the format:</code></pre><p>math \overrightarrow{\mathbf{B}}<em>{\text { demag } }=\widehat{\mathbf{K}}</em>{i j} * \overrightarrow{\mathbf{M}}_{j}</p><pre><code class="language-none">In JuMag we use FFT to calculate the demag kernel $/hat{k_{ij}} $









## LLG equation

The LLG equation is written as
</code></pre><p>math \frac{\partial \vec{m}}{\partial t} = - \gamma \vec{m} \times \vec{H} + \alpha \vec{m} \times  \frac{\partial \vec{m}}{\partial t}</p><pre><code class="language-none">
and the corresponding LL form is given by
</code></pre><p>math (1+\alpha^2)\frac{\partial \vec{m}}{\partial t} = - \gamma \vec{m} \times \vec{H} - \alpha \gamma \vec{m} \times (\vec{m} \times \vec{H})</p><pre><code class="language-none">
## LLG equation with extensions

For the driver `LLG_STT_CPP` the implemented equations is
</code></pre><p>math \frac{\partial \vec{m}}{\partial t} = - \gamma \vec{m} \times \vec{H} + \alpha \vec{m} \times  \frac{\partial \vec{m}}{\partial t}</p><ul><li>(\vec{u} \cdot \nabla) \vec{m} - \beta [\vec{m}\times (\vec{u} \cdot \nabla)\vec{m}] - a_J \vec{m} \times (\vec{m} \times \vec{p})</li><li>\eta a_J \vec{m} \times \vec{p}</li></ul><pre><code class="language-none">
The simulation related to spin transfer torques (in-plane and current-perpendicular-to-plane) and the spin orbit torques can use the `LLG_STT_CPP` driver.
## Steepest descent method
We provide a steepest descent energy minimization method for a complicated system,which is of the form
</code></pre><p>math x<em>{k+1} = x</em>k + \alpha<em>k d</em>k </p><pre><code class="language-none">where </code></pre><p>math d<em>k = - \nabla f(x</em>k)</p><pre><code class="language-none">And for the micromagnetics, we have</code></pre><p>math \mathbf{m}<em>{k+1} = \mathbf{m}</em>{k} - {\tau}<em>k \mathbf{m}</em>k  \times (\mathbf{m}<em>k \times \mathbf{H}</em>{\mathrm{eff}}) </p><pre><code class="language-none">In practice, we use the following update rule to keep the magnetization vector normalized.
</code></pre><p>math \boldsymbol{m}<em>{k+1}=\boldsymbol{m}</em>{k}-{\tau}<em>k \frac{\boldsymbol{m}</em>{k}+\boldsymbol{m}<em>{k+1}}{2} \times\left(\boldsymbol{m}</em>{k} \times \boldsymbol{H}<em>{\mathrm{eff}}\left(\boldsymbol{m}</em>{k}\right)\right)</p><pre><code class="language-none"></code></pre><p>math \boldsymbol{m}<em>{k+1}^2 = \boldsymbol{m}</em>{k}^2</p><pre><code class="language-none">From the equation we have:</code></pre><p>math (1+\frac{{\tau}<em>k^2}{4} \boldsymbol{f}</em>k^2)\mathbf{m}<em>{k+1} =  (1-\frac{{\tau}</em>k^2}{4} \boldsymbol{f}<em>k^2)\mathbf{m}</em>{k} -  {\tau}<em>k \mathbf{g}</em>k</p><pre><code class="language-none">where
</code></pre><p>math \begin{aligned}  \mathbf{f}<em>k&amp; = \mathbf{m}</em>k \times \mathbf{H}<em>{\mathrm{eff}} \\boldsymbol{g}</em>{k} &amp;=\boldsymbol{m}<em>{k} \times\left(\boldsymbol{m}</em>{k} \times \boldsymbol{H}_{\mathrm{eff}}\right)  \end{aligned}</p><pre><code class="language-none">The step size $\tau_k$  can be computed by
</code></pre><p>math \tau<em>{k}^{1}=\frac{\sum</em>{i} \boldsymbol{s}<em>{k-1}^{i} \cdot \boldsymbol{s}</em>{k-1}^{i}}{\sum<em>{i} \boldsymbol{s}</em>{k-1}^{i} \cdot \boldsymbol{y}<em>{k-1}^{i}} \quad, \quad \tau</em>{k}^{2}=\frac{\sum<em>{i} \boldsymbol{s}</em>{k-1}^{i} \cdot \boldsymbol{y}<em>{k-1}^{i}}{\sum</em>{i} \boldsymbol{y}<em>{k-1}^{i} \cdot \boldsymbol{y}</em>{k-1}^{i}}</p><pre><code class="language-none">where 
</code></pre><p>math \begin{aligned}  \boldsymbol{s}<em>{k-1} &amp;=\boldsymbol{m}</em>{k}-\boldsymbol{m}<em>{k-1} \ \boldsymbol{y}</em>{k-1} &amp;=\boldsymbol{g}<em>{k}-\boldsymbol{g}</em>{k-1} \end{aligned}</p><pre><code class="language-none">


## Monte Carlo Simulation

For triangular mesh (2D), the system energy reads
</code></pre><p>math H= \sum<em>{\langle i, j\rangle}  \vec{D}</em>{i j} \cdot\left(\vec{S}<em>{i} \times \vec{S}</em>{j}\right) -J \sum<em>{\langle i, j\rangle} \vec{S}</em>{i} \cdot \vec{S}<em>{j}- \lambda \sum</em>{\langle i, j\rangle} S<em>{i}^{z} S</em>{j}^{z} -K \sum<em>{i}\left(S</em>{i}^{z}\right)^{2}</p><pre><code class="language-none">
where
</code></pre><p>math \vec{D}<em>{i j} = D \hat{z} \times \hat{r}</em>{ij}  + D_z^{j} \hat{z} ```</p><footer><hr/><a class="previous" href="../tutorial/"><span class="direction">Previous</span><span class="title">Tutorial</span></a><a class="next" href="../notes/"><span class="direction">Next</span><span class="title">Notes</span></a></footer></article></body></html>
